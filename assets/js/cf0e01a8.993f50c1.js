"use strict";(self.webpackChunkidempiere_id_github_io=self.webpackChunkidempiere_id_github_io||[]).push([[584],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>g});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=r.createContext({}),p=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},c=function(e){var n=p(e.components);return r.createElement(l.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(t),m=a,g=u["".concat(l,".").concat(m)]||u[m]||d[m]||o;return t?r.createElement(g,s(s({ref:n},c),{},{components:t})):r.createElement(g,s({ref:n},c))}));function g(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,s=new Array(o);s[0]=m;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i[u]="string"==typeof e?e:a,s[1]=i;for(var p=2;p<o;p++)s[p]=t[p];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},7642:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var r=t(7462),a=(t(7294),t(3905));const o={title:"Developing Plug-in Processes",sidebar_label:"Processes",description:"Learn how to create and manage custom processes in iDempiere plug-ins.",sidebar_position:4},s="Developing Plug-in Processes",i={unversionedId:"basic-development/plugin-development/plugin-process",id:"basic-development/plugin-development/plugin-process",title:"Developing Plug-in Processes",description:"Learn how to create and manage custom processes in iDempiere plug-ins.",source:"@site/docs/basic-development/plugin-development/plugin-process.md",sourceDirName:"basic-development/plugin-development",slug:"/basic-development/plugin-development/plugin-process",permalink:"/docs/basic-development/plugin-development/plugin-process",draft:!1,editUrl:"https://github.com/idempiere/idempiere.github.io/tree/main/docs/basic-development/plugin-development/plugin-process.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Developing Plug-in Processes",sidebar_label:"Processes",description:"Learn how to create and manage custom processes in iDempiere plug-ins.",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Service Annotations",permalink:"/docs/basic-development/plugin-development/annotations-instead-xml"},next:{title:"Callouts",permalink:"/docs/basic-development/plugin-development/plugin-callouts"}},l={},p=[{value:"\ud83c\udfaf Goal",id:"-goal",level:2},{value:"What is a Process?",id:"what-is-a-process",level:3},{value:"What You Will Learn",id:"what-you-will-learn",level:3},{value:"\u2705 Prerequisites",id:"-prerequisites",level:2},{value:"\ud83d\udccb Creating a Process",id:"-creating-a-process",level:2},{value:"Step 1: Create the Process Class",id:"step-1-create-the-process-class",level:3},{value:"\ud83d\udccb Registering Your Process",id:"-registering-your-process",level:2},{value:"Modern Approach (iDempiere 9+): Mapped Process Factory",id:"modern-approach-idempiere-9-mapped-process-factory",level:3},{value:"Method 1: Register at Plugin Activator Start",id:"method-1-register-at-plugin-activator-start",level:4},{value:"Method 2: Bind via OSGi Component Service",id:"method-2-bind-via-osgi-component-service",level:4},{value:"Method 3: Extend MappedProcessFactory",id:"method-3-extend-mappedprocessfactory",level:4},{value:"Method 4: Scan Package with Annotations (Recommended)",id:"method-4-scan-package-with-annotations-recommended",level:4},{value:"Using @Process Annotation",id:"using-process-annotation",level:3},{value:"Legacy Approach: Using a Process Factory",id:"legacy-approach-using-a-process-factory",level:3},{value:"Step 1: Create the Process Factory Class",id:"step-1-create-the-process-factory-class",level:4},{value:"Step 2: Register as OSGi Component",id:"step-2-register-as-osgi-component",level:4},{value:"\ud83d\udce5 Reading Process Parameters",id:"-reading-process-parameters",level:2},{value:"Using @Parameter Annotation (Recommended)",id:"using-parameter-annotation-recommended",level:3},{value:"Manual Parameter Reading",id:"manual-parameter-reading",level:3},{value:"\ud83d\udcdd Logging Information",id:"-logging-information",level:2},{value:"Using CLogger",id:"using-clogger",level:3},{value:"Using addLog() for Process Audit",id:"using-addlog-for-process-audit",level:3},{value:"Using addBufferLog()",id:"using-addbufferlog",level:3},{value:"\u26a0\ufe0f Error Handling",id:"\ufe0f-error-handling",level:2},{value:"Returning Status Messages",id:"returning-status-messages",level:3},{value:"Throwing Exceptions",id:"throwing-exceptions",level:3},{value:"\ud83d\udcac Interacting with Users",id:"-interacting-with-users",level:2},{value:"Asking Yes/No Questions",id:"asking-yesno-questions",level:3},{value:"Asking for String Input",id:"asking-for-string-input",level:3},{value:"Blocking Until User Response",id:"blocking-until-user-response",level:3},{value:"Asking for Secret Input (Passwords, PINs)",id:"asking-for-secret-input-passwords-pins",level:3},{value:"\ud83e\uddea Testing Your Process",id:"-testing-your-process",level:2},{value:"\ud83d\udce6 Exporting Your Plug-in",id:"-exporting-your-plug-in",level:2},{value:"\ud83c\udfa5 Video Tutorial",id:"-video-tutorial",level:2},{value:"\ud83d\udd17 Related Resources",id:"-related-resources",level:2}],c={toc:p},u="wrapper";function d(e){let{components:n,...t}=e;return(0,a.kt)(u,(0,r.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"developing-plug-in-processes"},"Developing Plug-in Processes"),(0,a.kt)("h2",{id:"-goal"},"\ud83c\udfaf Goal"),(0,a.kt)("p",null,"This tutorial shows you how to develop ",(0,a.kt)("strong",{parentName:"p"},"processes")," within your own plug-in, enabling you to create custom business logic that users can execute on demand."),(0,a.kt)("h3",{id:"what-is-a-process"},"What is a Process?"),(0,a.kt)("p",null,"A ",(0,a.kt)("strong",{parentName:"p"},"process")," in iDempiere is a unit of business logic that performs specific operations, typically triggered by users through buttons, menus, or scheduled tasks. Processes can:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Perform batch operations")," (e.g., generate invoices, update prices)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Generate reports and exports")," (e.g., export data to XML, create PDFs)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Execute calculations")," (e.g., calculate commissions, consolidate data)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Integrate with external systems")," (e.g., send data to APIs, import files)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Automate workflows")," (e.g., send notifications, update records)")),(0,a.kt)("h3",{id:"what-you-will-learn"},"What You Will Learn"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Create and run a new process in your custom plug-in"),(0,a.kt)("li",{parentName:"ul"},"Define and read process parameters"),(0,a.kt)("li",{parentName:"ul"},"Log information during process execution"),(0,a.kt)("li",{parentName:"ul"},"Handle errors properly during and after process execution"),(0,a.kt)("li",{parentName:"ul"},"Interact with users during process execution")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"-prerequisites"},"\u2705 Prerequisites"),(0,a.kt)("p",null,"Before starting, review:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"./developing-plugins"},"Developing Plug-Ins Without Affecting the Trunk")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"./plugin-running-locally"},"Running Plug-ins Locally"))),(0,a.kt)("p",null,"You should already know how to create a plug-in, as this guide will not cover that in detail."),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"-creating-a-process"},"\ud83d\udccb Creating a Process"),(0,a.kt)("h3",{id:"step-1-create-the-process-class"},"Step 1: Create the Process Class"),(0,a.kt)("p",null,"Create a new class that extends ",(0,a.kt)("inlineCode",{parentName:"p"},"SvrProcess")," and implements the required methods:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"prepare()"))," - Reads and validates process parameters"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"doIt()"))," - Contains the main business logic")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example: Simple Process with Annotation")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'import org.adempiere.base.annotation.Process;\nimport org.adempiere.base.annotation.Parameter;\nimport org.compiere.process.SvrProcess;\nimport org.compiere.model.MProduct;\nimport java.io.File;\nimport java.io.FileWriter;\n\n@Process\npublic class PrintProductXML extends SvrProcess {\n\n    @Parameter\n    private int p_M_Product_ID;\n    \n    public PrintProductXML() {\n    }\n\n    @Override\n    protected void prepare() {\n        // Parameters are automatically injected via @Parameter annotation\n    }\n\n    @Override\n    protected String doIt() throws Exception {\n        MProduct product = MProduct.get(p_M_Product_ID);\n        File exportFile = File.createTempFile(product.getValue(), ".xml");\n        FileWriter writer = new FileWriter(exportFile);\n        writer.write(product.get_xmlString(null).toString());\n        writer.close();\n        \n        if (processUI != null)\n            processUI.download(exportFile);\n            \n        return "@Ok@";\n    }\n}\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example Project:")),(0,a.kt)("p",null,"For a complete working example, see:",(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("a",{parentName:"p",href:"https://github.com/hengsin/idempiere-examples/tree/main/org.idempiere.process.annotation.example/src/org/idempiere/process/annotation/example"},"idempiere-examples: Process Annotation Example")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"-registering-your-process"},"\ud83d\udccb Registering Your Process"),(0,a.kt)("h3",{id:"modern-approach-idempiere-9-mapped-process-factory"},"Modern Approach (iDempiere 9+): Mapped Process Factory"),(0,a.kt)("p",null,"Starting with ",(0,a.kt)("strong",{parentName:"p"},"iDempiere 9"),", a new process factory base class was introduced that's backed by Map and Lambda functional objects. This approach supports multiple registration methods."),(0,a.kt)("h4",{id:"method-1-register-at-plugin-activator-start"},"Method 1: Register at Plugin Activator Start"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"public void start(BundleContext context) throws Exception {\n    IMappedProcessFactory mappedFactory = Core.getMappedProcessFactory();\n    mappedFactory.addMapping(MyTest.class.getName(), () -> new MyTest());\n}\n")),(0,a.kt)("admonition",{type:"warning"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("inlineCode",{parentName:"p"},"Core.getMappedProcessFactory()")," can return ",(0,a.kt)("inlineCode",{parentName:"p"},"null")," if your bundle activates before the service. Use Method 4 for safer registration.")),(0,a.kt)("h4",{id:"method-2-bind-via-osgi-component-service"},"Method 2: Bind via OSGi Component Service"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"@Component(immediate = true)\npublic class MyProcessComponent {\n    \n    @Reference\n    public void bindService(IMappedProcessFactory factory) {\n        factory.addMapping(MyTest.class.getName(), () -> new MyTest());\n    }\n}\n")),(0,a.kt)("h4",{id:"method-3-extend-mappedprocessfactory"},"Method 3: Extend MappedProcessFactory"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"@Component(service = IProcessFactory.class)\npublic class MyFactory extends MappedProcessFactory {\n    public MyFactory() {\n        addMapping(MyTest.class.getName(), () -> new MyTest());\n    }\n}\n")),(0,a.kt)("admonition",{title:"Important",type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Do ",(0,a.kt)("strong",{parentName:"p"},"NOT")," register as ",(0,a.kt)("inlineCode",{parentName:"p"},"IMappedProcessFactory")," service when extending ",(0,a.kt)("inlineCode",{parentName:"p"},"MappedProcessFactory"),".")),(0,a.kt)("h4",{id:"method-4-scan-package-with-annotations-recommended"},"Method 4: Scan Package with Annotations (Recommended)"),(0,a.kt)("p",null,"Use ",(0,a.kt)("inlineCode",{parentName:"p"},"@Component"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"@Reference"),", and ",(0,a.kt)("inlineCode",{parentName:"p"},"@Activate")," for safe registration:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'import org.osgi.service.component.annotations.Activate;\nimport org.osgi.service.component.annotations.Component;\nimport org.osgi.service.component.annotations.Reference;\nimport org.osgi.service.component.annotations.ReferenceCardinality;\n\n@Component(immediate = true)\npublic class MyActivator implements BundleActivator {\n    \n    @Reference(service = IMappedProcessFactory.class, \n               cardinality = ReferenceCardinality.MANDATORY) \n    private IMappedProcessFactory mappedProcessFactory;\n    \n    public MyActivator() {\n    }\n    \n    @Override\n    public void start(BundleContext context) throws Exception {\n    }\n    \n    @Override\n    public void stop(BundleContext context) throws Exception {\n    }\n    \n    // activate() is called only after mappedProcessFactory reference is injected\n    @Activate\n    public void activate(BundleContext context) {\n        // Replace with your package name containing process classes\n        mappedProcessFactory.scan(context, "org.mycompany.process");\n    }\n}\n')),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"using-process-annotation"},"Using @Process Annotation"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"@Process")," annotation allows you to declaratively register your process class. The annotation has an optional ",(0,a.kt)("inlineCode",{parentName:"p"},"name")," parameter to provide an alternate registration name."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@Process(name = "MyCustomProcess")\npublic class BPartnerValidate extends SvrProcess {\n    \n    @Override\n    protected void prepare() {\n    }\n    \n    @Override\n    protected String doIt() throws Exception {\n        // Your logic here\n        return "@Success@";\n    }\n}\n')),(0,a.kt)("p",null,"To enable annotation scanning, create an OSGi component that extends ",(0,a.kt)("inlineCode",{parentName:"p"},"AnnotationBasedProcessFactory"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@Component(\n    immediate = true, \n    service = IProcessFactory.class, \n    property = {"service.ranking:Integer=1"}\n)\npublic class MyAnnotationProcessFactory extends AnnotationBasedProcessFactory {\n    // The base class automatically scans for @Process annotations\n}\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Technical References:")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://idempiere.atlassian.net/browse/IDEMPIERE-4689"},"IDEMPIERE-4689")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://idempiere.atlassian.net/browse/IDEMPIERE-5001"},"IDEMPIERE-5001"))),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"legacy-approach-using-a-process-factory"},"Legacy Approach: Using a Process Factory"),(0,a.kt)("p",null,"For versions before iDempiere 9, use the ",(0,a.kt)("inlineCode",{parentName:"p"},"IProcessFactory")," interface."),(0,a.kt)("h4",{id:"step-1-create-the-process-factory-class"},"Step 1: Create the Process Factory Class"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package com.example.process;\n\nimport org.adempiere.base.IProcessFactory;\nimport org.compiere.process.ProcessCall;\n\npublic class MyProcessFactory implements IProcessFactory {\n\n    @Override\n    public ProcessCall newProcessInstance(String className) {\n        if (className.equals("com.example.process.MyProcess")) {\n            return new MyProcess();\n        }\n        return null;\n    }\n}\n')),(0,a.kt)("h4",{id:"step-2-register-as-osgi-component"},"Step 2: Register as OSGi Component"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Option A: Using Annotations")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@Component(\n    service = IProcessFactory.class,\n    immediate = true,\n    property = {"service.ranking:Integer=100"}\n)\npublic class MyProcessFactory implements IProcessFactory {\n    // ... implementation\n}\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Option B: Manual Component Definition")),(0,a.kt)("p",null,"Create ",(0,a.kt)("inlineCode",{parentName:"p"},"OSGI-INF/processfactory.xml"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<scr:component xmlns:scr="http://www.osgi.org/xmlns/scr/v1.1.0" \n               name="com.example.process.factory">\n   <implementation class="com.example.process.MyProcessFactory"/>\n   <property name="service.ranking" type="Integer" value="100"/>\n   <service>\n      <provide interface="org.adempiere.base.IProcessFactory"/>\n   </service>\n</scr:component>\n')),(0,a.kt)("p",null,"Update ",(0,a.kt)("inlineCode",{parentName:"p"},"META-INF/MANIFEST.MF"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"Service-Component: OSGI-INF/*.xml\n")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"-reading-process-parameters"},"\ud83d\udce5 Reading Process Parameters"),(0,a.kt)("h3",{id:"using-parameter-annotation-recommended"},"Using @Parameter Annotation (Recommended)"),(0,a.kt)("p",null,"The simplest way to read parameters is using the ",(0,a.kt)("inlineCode",{parentName:"p"},"@Parameter")," annotation:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@Process\npublic class MyProcess extends SvrProcess {\n\n    @Parameter\n    private int p_M_Product_ID;\n    \n    @Parameter\n    private String p_Name;\n    \n    @Parameter\n    private boolean p_IsActive;\n    \n    @Override\n    protected void prepare() {\n        // Parameters are automatically injected\n    }\n\n    @Override\n    protected String doIt() throws Exception {\n        // Use the parameters directly\n        log.info("Product ID: " + p_M_Product_ID);\n        return "@Success@";\n    }\n}\n')),(0,a.kt)("h3",{id:"manual-parameter-reading"},"Manual Parameter Reading"),(0,a.kt)("p",null,"For more control, you can manually read parameters in the ",(0,a.kt)("inlineCode",{parentName:"p"},"prepare()")," method:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'public class MyProcess extends SvrProcess {\n\n    private boolean p_IsPrinted = false;\n    private int p_M_Product_ID = 0;\n    \n    @Override\n    protected void prepare() {\n        ProcessInfoParameter[] para = getParameter();\n        for (int i = 0; i < para.length; i++) {\n            String name = para[i].getParameterName();\n            if (para[i].getParameter() == null)\n                continue;\n            else if (name.equals("IsPrinted"))\n                p_IsPrinted = para[i].getParameterAsBoolean();\n            else if (name.equals("M_Product_ID"))\n                p_M_Product_ID = para[i].getParameterAsInt();\n        }\n    }\n\n    @Override\n    protected String doIt() throws Exception {\n        // Your logic using the parameters\n        return "@Success@";\n    }\n}\n')),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"-logging-information"},"\ud83d\udcdd Logging Information"),(0,a.kt)("h3",{id:"using-clogger"},"Using CLogger"),(0,a.kt)("p",null,"Every process inheriting from ",(0,a.kt)("inlineCode",{parentName:"p"},"SvrProcess")," has a ",(0,a.kt)("inlineCode",{parentName:"p"},"log")," instance variable:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@Override\nprotected String doIt() throws Exception {\n    log.info("Starting process...");\n    log.warning("This is a warning");\n    log.severe("This is an error");\n    return "@Success@";\n}\n')),(0,a.kt)("p",null,"These logs appear in the console and iDempiere logs (if configured)."),(0,a.kt)("h3",{id:"using-addlog-for-process-audit"},"Using addLog() for Process Audit"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"addLog()")," methods create entries in the ",(0,a.kt)("strong",{parentName:"p"},"Process Audit")," window, visible to users:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@Override\nprotected String doIt() throws Exception {\n    // Simple log entry\n    addLog(getProcessInfo().getAD_Process_ID(),\n           new Timestamp(System.currentTimeMillis()),\n           new BigDecimal(getProcessInfo().getAD_PInstance_ID()),\n           "Processing started");\n    \n    // Log entry with link to a record\n    addLog(getProcessInfo().getAD_Process_ID(),\n           new Timestamp(System.currentTimeMillis()),\n           new BigDecimal(getProcessInfo().getAD_PInstance_ID()),\n           "Processing product: " + product.getName(),\n           MProduct.Table_ID,\n           product.get_ID());\n    \n    return "@Success@";\n}\n')),(0,a.kt)("h3",{id:"using-addbufferlog"},"Using addBufferLog()"),(0,a.kt)("p",null,"For simpler logging with record links:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'addBufferLog(id, date, number, "Message", MProduct.Table_ID, productId);\n')),(0,a.kt)("p",null,"If the table ID and record ID are valid, this creates a clickable link in the process results."),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"\ufe0f-error-handling"},"\u26a0\ufe0f Error Handling"),(0,a.kt)("h3",{id:"returning-status-messages"},"Returning Status Messages"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"doIt()")," method returns a ",(0,a.kt)("inlineCode",{parentName:"p"},"String")," that's shown to the user:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@Override\nprotected String doIt() throws Exception {\n    if (success) {\n        return "@Success@";  // Uses message from AD_Message\n    } else {\n        return "Process completed with warnings";\n    }\n}\n')),(0,a.kt)("h3",{id:"throwing-exceptions"},"Throwing Exceptions"),(0,a.kt)("p",null,"To stop the process and show an error:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@Override\nprotected String doIt() throws Exception {\n    if (p_M_Product_ID <= 0) {\n        throw new AdempiereException("@Invalid@ @M_Product_ID@");\n    }\n    \n    // Your logic here\n    \n    return "@Success@";\n}\n')),(0,a.kt)("p",null,"In the ",(0,a.kt)("strong",{parentName:"p"},"Process Audit")," window:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Result = 0")," indicates an exception occurred"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Result = 1")," indicates successful completion with your return message")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"-interacting-with-users"},"\ud83d\udcac Interacting with Users"),(0,a.kt)("h3",{id:"asking-yesno-questions"},"Asking Yes/No Questions"),(0,a.kt)("p",null,"You can ask users for input during process execution:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'@Override\nprotected String doIt() throws Exception {\n    processUI.ask("Do you want to continue?", new Callback<Boolean>() {\n        public void onCallback(Boolean result) {\n            addLog("You selected " + (result ? "Yes" : "No"));\n        }\n    });\n    \n    return null;\n}\n')),(0,a.kt)("h3",{id:"asking-for-string-input"},"Asking for String Input"),(0,a.kt)("p",null,"Request text input from the user:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'processUI.askForInput("Please enter a value:", new Callback<String>() {\n    @Override\n    public void onCallback(String result) {\n        addLog("You entered: " + result);\n    }\n});\n')),(0,a.kt)("h3",{id:"blocking-until-user-response"},"Blocking Until User Response"),(0,a.kt)("p",null,"Since processes continue running before receiving the answer, you may need to block execution:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'final StringBuffer answer = new StringBuffer();\nfinal StringBuffer retVal = new StringBuffer();\n\nprocessUI.askForInput("Please enter some String", new Callback<String>() {\n    @Override\n    public void onCallback(String result) {\n        addLog("You entered: " + result);\n        retVal.append(result);\n        answer.append("done");\n    }\n});\n\n// Wait for user response\nwhile (answer.length() == 0) {\n    try {\n        Thread.sleep(200);\n    } catch (InterruptedException e) {\n        // Handle interruption\n    }\n}\n\n// Now you can use the value in retVal\nString userInput = retVal.toString();\n')),(0,a.kt)("admonition",{title:"Why Two StringBuffers?",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"We use two separate ",(0,a.kt)("inlineCode",{parentName:"p"},"StringBuffer")," objects because the user input could be empty. Using only one buffer would cause the process to wait forever if the user provides no input.")),(0,a.kt)("h3",{id:"asking-for-secret-input-passwords-pins"},"Asking for Secret Input (Passwords, PINs)"),(0,a.kt)("p",null,"For sensitive information like passwords or TANs, use ",(0,a.kt)("inlineCode",{parentName:"p"},"askForSecretInput()")," which obfuscates the characters as the user types:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'final StringBuffer answer = new StringBuffer();\nfinal StringBuffer retVal = new StringBuffer();\n\nprocessUI.askForSecretInput("Please enter your password:", new Callback<String>() {\n    @Override\n    public void onCallback(String result) {\n        addLog("Password received");\n        retVal.append(result);\n        answer.append("done");\n    }\n});\n\n// Wait for user response\nwhile (answer.length() == 0) {\n    try {\n        Thread.sleep(200);\n    } catch (InterruptedException e) {\n        // Handle interruption\n    }\n}\n\n// Now you can use the password in retVal\nString password = retVal.toString();\n// Use the password for authentication, etc.\n')),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"The ",(0,a.kt)("inlineCode",{parentName:"p"},"askForSecretInput()")," method works exactly like ",(0,a.kt)("inlineCode",{parentName:"p"},"askForInput()"),", but displays asterisks or dots instead of the actual characters being typed, providing better security for sensitive data.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Technical Reference:")," ",(0,a.kt)("a",{parentName:"p",href:"https://idempiere.atlassian.net/browse/IDEMPIERE-2205"},"IDEMPIERE-2205")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"-testing-your-process"},"\ud83e\uddea Testing Your Process"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Deploy your plug-in to iDempiere"),(0,a.kt)("li",{parentName:"ol"},"Create a new process record in the ",(0,a.kt)("strong",{parentName:"li"},"Process")," window (",(0,a.kt)("inlineCode",{parentName:"li"},"AD_Process"),")"),(0,a.kt)("li",{parentName:"ol"},"Set the ",(0,a.kt)("strong",{parentName:"li"},"Classname")," to your process's fully qualified class name"),(0,a.kt)("li",{parentName:"ol"},"Add parameters in the ",(0,a.kt)("strong",{parentName:"li"},"Process Parameter")," tab if needed"),(0,a.kt)("li",{parentName:"ol"},"Run the process from a window, button, or menu"),(0,a.kt)("li",{parentName:"ol"},"Check the ",(0,a.kt)("strong",{parentName:"li"},"Process Audit")," window for results and logs")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"-exporting-your-plug-in"},"\ud83d\udce6 Exporting Your Plug-in"),(0,a.kt)("p",null,"Before exporting:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Verify ",(0,a.kt)("inlineCode",{parentName:"li"},"OSGI-INF/")," is in ",(0,a.kt)("inlineCode",{parentName:"li"},"build.properties")," under ",(0,a.kt)("strong",{parentName:"li"},"Binary Build")),(0,a.kt)("li",{parentName:"ol"},"Ensure all component definition XML files are included"),(0,a.kt)("li",{parentName:"ol"},"Test in a clean iDempiere instance")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"-video-tutorial"},"\ud83c\udfa5 Video Tutorial"),(0,a.kt)("p",null,"Watch this video walkthrough:",(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=5SDqnbYrpQc"},"https://www.youtube.com/watch?v=5SDqnbYrpQc")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"-related-resources"},"\ud83d\udd17 Related Resources"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/idempiere/idempiere/blob/master/org.adempiere.base/src/org/compiere/process/SvrProcess.java"},"SvrProcess Class")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/idempiere/idempiere/blob/master/org.adempiere.base/src/org/adempiere/base/IProcessFactory.java"},"IProcessFactory Interface")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://wiki.idempiere.org/en/Process"},"Process Overview")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://idempiere.atlassian.net/browse/IDEMPIERE-4689"},"iDempiere 9 Process Factory"))))}d.isMDXComponent=!0}}]);