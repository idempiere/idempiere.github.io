"use strict";(self.webpackChunkidempiere_id_github_io=self.webpackChunkidempiere_id_github_io||[]).push([[9657],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=c(n),u=i,g=m["".concat(s,".").concat(u)]||m[u]||d[u]||r;return n?a.createElement(g,o(o({ref:t},p),{},{components:n})):a.createElement(g,o({ref:t},p))}));function g(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[m]="string"==typeof e?e:i,o[1]=l;for(var c=2;c<r;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},459:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var a=n(7462),i=(n(7294),n(3905));const r={title:"Changing the Database",sidebar_label:"Changing the Database",sidebar_position:3,description:"Guidelines for safely updating the iDempiere database schema"},o=void 0,l={unversionedId:"basic-development/contributing-to-core/changing-the-database",id:"basic-development/contributing-to-core/changing-the-database",title:"Changing the Database",description:"Guidelines for safely updating the iDempiere database schema",source:"@site/docs/basic-development/contributing-to-core/changing-the-database.md",sourceDirName:"basic-development/contributing-to-core",slug:"/basic-development/contributing-to-core/changing-the-database",permalink:"/docs/basic-development/contributing-to-core/changing-the-database",draft:!1,editUrl:"https://github.com/idempiere/idempiere.github.io/tree/main/docs/basic-development/contributing-to-core/changing-the-database.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Changing the Database",sidebar_label:"Changing the Database",sidebar_position:3,description:"Guidelines for safely updating the iDempiere database schema"},sidebar:"tutorialSidebar",previous:{title:"Git Workflow",permalink:"/docs/basic-development/contributing-to-core/git-workflow"},next:{title:"Common Issues",permalink:"/docs/basic-development/contributing-to-core/common-issues"}},s={},c=[{value:"\ud83c\udd94 Requesting Centralized IDs",id:"-requesting-centralized-ids",level:2},{value:"\ud83d\udee0 Generating Migration Scripts",id:"-generating-migration-scripts",level:2},{value:"\u26a0\ufe0f Important",id:"\ufe0f-important",level:3},{value:"\u2705 Example Migration Script",id:"-example-migration-script",level:3}],p={toc:c},m="wrapper";function d(e){let{components:t,...n}=e;return(0,i.kt)(m,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"If your contribution includes ",(0,i.kt)("strong",{parentName:"p"},"changes to the database"),", follow these steps to ensure consistency across environments:"),(0,i.kt)("h2",{id:"-requesting-centralized-ids"},"\ud83c\udd94 Requesting Centralized IDs"),(0,i.kt)("p",null,"Request official IDs as described in the ",(0,i.kt)("a",{parentName:"p",href:"https://wiki.idempiere.org/en/Centralized_ID_Management"},"Manage the Centralized IDs")," guide or contact the core team.."),(0,i.kt)("h2",{id:"-generating-migration-scripts"},"\ud83d\udee0 Generating Migration Scripts"),(0,i.kt)("p",null,"To generate migration scripts automatically:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Open the ",(0,i.kt)("strong",{parentName:"li"},"iDempiere Web UI")," and log in as ",(0,i.kt)("strong",{parentName:"li"},"System Administrator"),"."),(0,i.kt)("li",{parentName:"ol"},"Click on the ",(0,i.kt)("strong",{parentName:"li"},"Preference")," icon next to ",(0,i.kt)("strong",{parentName:"li"},"Change Role"),"."),(0,i.kt)("li",{parentName:"ol"},"Enable the following flags:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Dictionary Maintenance")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Log Migration Scripts")))),(0,i.kt)("li",{parentName:"ol"},"Fill in the ",(0,i.kt)("strong",{parentName:"li"},"Migration Script Comment")," \u2014 it ",(0,i.kt)("strong",{parentName:"li"},"must include the JIRA ticket number and a short description")," (e.g., ",(0,i.kt)("inlineCode",{parentName:"li"},"IDEMPIERE-5409 Dashboard Content - Maximizable checkbox"),").")),(0,i.kt)("p",null,"After completing these steps, continue creating or updating the required dictionary objects."),(0,i.kt)("p",null,"iDempiere will automatically generate the corresponding SQL migration scripts and place them in your local migration folder (e.g., ",(0,i.kt)("inlineCode",{parentName:"p"},"migration/iD12/"),"). In most cases, these scripts will be ready to commit as part of your pull request."),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"\ufe0f-important"},"\u26a0\ufe0f Important"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Even failed SQL statements are logged.",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"You must carefully review the generated migration script before committing it."),(0,i.kt)("br",{parentName:"p"}),"\n","Remove or correct any invalid or unnecessary statements to ensure the integrity of the database update process.")),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"-example-migration-script"},"\u2705 Example Migration Script"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"-- IDEMPIERE-5409 Dashboard Content - Maximizable checkbox\nSELECT register_migration_script('202209061547_IDEMPIERE-5409.sql') FROM dual;\n\n-- Sep 6, 2022, 3:47:13 PM CEST\nINSERT INTO AD_Element (AD_Element_ID,AD_Client_ID,AD_Org_ID,IsActive,Created,CreatedBy,Updated,UpdatedBy,ColumnName,Name,PrintName,EntityType,AD_Element_UU) VALUES (203651,0,0,'Y',TO_TIMESTAMP('2022-09-06 15:47:13','YYYY-MM-DD HH24:MI:SS'),100,TO_TIMESTAMP('2022-09-06 15:47:13','YYYY-MM-DD HH24:MI:SS'),100,'IsMaximizable','Is Maximizable','Is Maximizable','D','250c4f55-23e9-48d7-b5b4-0154ecf8b52a')\n;\n\n-- Sep 6, 2022, 3:48:41 PM CEST\nINSERT INTO AD_Column (AD_Column_ID,Version,Name,AD_Table_ID,ColumnName,DefaultValue,FieldLength,IsKey,IsParent,IsMandatory,IsTranslated,IsIdentifier,SeqNo,IsEncrypted,AD_Reference_ID,AD_Client_ID,AD_Org_ID,IsActive,Created,CreatedBy,Updated,UpdatedBy,AD_Element_ID,IsUpdateable,IsSelectionColumn,EntityType,IsSyncDatabase,IsAlwaysUpdateable,IsAutocomplete,IsAllowLogging,AD_Column_UU,IsAllowCopy,SeqNoSelection,IsToolbarButton,IsSecure,FKConstraintType,IsHtml) VALUES (215283,0,'Is Maximizable',50010,'IsMaximizable','Y',1,'N','N','Y','N','N',0,'N',20,0,0,'Y',TO_TIMESTAMP('2022-09-06 15:48:40','YYYY-MM-DD HH24:MI:SS'),100,TO_TIMESTAMP('2022-09-06 15:48:40','YYYY-MM-DD HH24:MI:SS'),100,203651,'Y','N','D','N','N','N','Y','afa27a31-f8f8-4bc4-a734-b136e430793a','Y',0,'N','N','N','N')\n;\n\n-- Sep 6, 2022, 3:50:01 PM CEST\nALTER TABLE PA_DashboardContent ADD COLUMN IsMaximizable CHAR(1) DEFAULT 'Y' CHECK (IsMaximizable IN ('Y','N')) NOT NULL\n;\n")))}d.isMDXComponent=!0}}]);